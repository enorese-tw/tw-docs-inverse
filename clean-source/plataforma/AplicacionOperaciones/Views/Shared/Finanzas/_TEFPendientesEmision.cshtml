<div class="row">
    <div class="col-12 col-sm-12 col-md-12 col-lg-12">
        @Html.Partial("Finanzas/_DetalleProcesoPendiente")
    </div>
</div>
@if (((List<AplicacionOperaciones.Models.Finanzas.Transferencia>)ViewBag.RenderizadoTransferencias).Count > 0)
{
    <div class="row">
        <div class="col-12 col-sm-12 col-md-12 col-lg-12">
            <table border="1" cellspacing="0" cellpadding="5" style="width: 100%;" class="family-teamwork">
                <thead>
                    <tr>
                        <td class="ta-center" rowspan="2"></td>
                        <td class="ta-center" rowspan="2">Tipo Documento</td>
                        <td class="ta-center" rowspan="2">Rut Trabajador</td>
                        <td class="ta-center" rowspan="2">Nombre Trabajador</td>
                        <td class="ta-center" rowspan="2">Banco</td>
                        <td class="ta-center" rowspan="2">Numero Cuenta</td>
                        <td class="ta-center" colspan="2">Montos Asociados</td>
                        <td class="ta-center" rowspan="2">Total Pago</td>
                        <td rowspan="2"></td>
                    </tr>
                    <tr>
                        <td class="ta-center">Total Finiquito</td>
                        <td class="ta-center">Gasto Adm.</td>
                    </tr>
                </thead>
                <tbody>
                    @foreach (AplicacionOperaciones.Models.Finanzas.Transferencia item in ViewBag.RenderizadoTransferencias)
                    {
                    <tr>
                        <td class="ta-center @item.ColorNotariado"><img src="~/Resources/@item.Notariado" style="width: 30px;" /></td>
                        <td class="ta-center">@item.Documento</td>
                        <td class="ta-center">@item.Rut</td>
                        <td class="ta-center">@item.Nombre</td>
                        <td class="ta-center">@item.Banco</td>
                        <td class="ta-center">@item.Cuenta</td>
                        <td class="ta-center" style="font-size: 20px;">@item.TotalFiniquito</td>
                        <td class="ta-center" style="font-size: 20px;">@item.GastoAdministrativo</td>
                        <td class="ta-center" style="font-size: 20px;">@item.TotalPago</td>
                        <td>
                            @switch (item.Origen)
                            {
                                case "FNQ":
                                    using (Ajax.BeginForm("ConfirmarEvento", "Finanzas", new AjaxOptions()
                                    {
                                        HttpMethod = "POST",
                                        InsertionMode = InsertionMode.Replace,
                                        UpdateTargetId = "confirmacionEvent",
                                        OnSuccess = "ModalConfirmacionEvent",
                                        LoadingElementId = "loader"
                                    }))
                                    {
                                        <input type="text" name="option" value="TotalesFiniquito" class="dspl-none" />
                                        <input type="text" name="codigoPago" value="@item.CodigoTEF" class="dspl-none" />
                                        <input type="text" name="typeTEF" value="@ViewBag.TypeTEF" class="dspl-none" />
                                        <button type="submit" class="btn btn-teamwork"
                                                style="border-radius: 25px; height: 40px; text-align: left; color: #fff;">
                                            <i class="glyphicon-tw-7 glyphicon-tw-calculado" style="display: inline-block;"></i>
                                            <span style="display: inline-block; margin-top: -7px;">
                                                <i style="font-family: 'Open Sans Condensed', sans-serif;
                                            font-size: 14px; font-style: normal; display: block; margin-bottom: -8px;">Montos Totales</i>
                                                <i style="font-family: 'Open Sans Condensed', sans-serif;
                                            font-size: 14px; font-style: normal; display: block;">Del Finiquitos</i>
                                            </span>
                                        </button>
                                    }
                                    break;
                            }


                            @if (item.OptRevertirIncorporacionTefPago == "S")
                            {
                                using (Ajax.BeginForm("RevertirIncorporacionTransferenciaPago", "Finanzas", new AjaxOptions()
                                {
                                    HttpMethod = "POST",
                                    InsertionMode = InsertionMode.Replace,
                                    UpdateTargetId = "transferenciasConfirmadas",
                                    LoadingElementId = "loader"
                                }))
                                {
                                    <input type="text" name="codigoProceso" value="@ViewBag.ReferenciaCodigoProceso" class="dspl-none" />
                                    <input type="text" name="codigoPago" value="@item.CodigoTEF" class="dspl-none" />
                                    <input type="text" name="tipoPago" value="@ViewBag.ReferenciaMetodoPago" class="dspl-none" />
                                    <input type="text" name="origen" value="@item.Origen" class="dspl-none" />
                                    <input type="text" name="typeTEF" value="@ViewBag.TypeTEF" class="dspl-none" />
                                    <button type="submit" class="btn btn-anulado"
                                            style="border-radius: 25px; height: 40px; text-align: left; color: #fff;">
                                        <i class="glyphicon-tw-7 glyphicon-tw-cancel" style="display: inline-block;"></i>
                                        <span style="display: inline-block; margin-top: -7px;">
                                            <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                    font-size: 14px; font-style: normal; display: block; margin-bottom: -8px;">Revertir Incorporación</i>
                                            <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                            font-size: 14px; font-style: normal; display: block;">Proceso de Pago</i>
                                        </span>
                                    </button>
                                }
                            }

                            @if (item.OptNoNotariado == "S")
                            {
                                using (Ajax.BeginForm("MarcarNoTEFNotariado", "Finanzas", new AjaxOptions()
                                {
                                    HttpMethod = "POST",
                                    InsertionMode = InsertionMode.Replace,
                                    UpdateTargetId = "transferenciasConfirmadas",
                                    LoadingElementId = "loader"
                                }))
                                {
                                    <input type="text" name="codigoProceso" value="@ViewBag.ReferenciaCodigoProceso" class="dspl-none" />
                                    <input type="text" name="codigoPago" value="@item.CodigoTEF" class="dspl-none" />
                                    <input type="text" name="tipoPago" value="@ViewBag.ReferenciaMetodoPago" class="dspl-none" />
                                    <input type="text" name="origen" value="@item.Origen" class="dspl-none" />
                                    <input type="text" name="typeTEF" value="@ViewBag.TypeTEF" class="dspl-none" />
                                    <button type="submit" class="btn btn-warning"
                                            style="border-radius: 25px; height: 40px; text-align: left; color: #fff;">
                                        <i class="glyphicon-tw-7 glyphicon-tw-cancel" style="display: inline-block;"></i>
                                        <span style="display: inline-block; margin-top: -7px;">
                                            <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                        font-size: 14px; font-style: normal; display: block; margin-bottom: -8px;">Marcar Tef Como</i>
                                            <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                font-size: 14px; font-style: normal; display: block;">No Notariado</i>
                                        </span>
                                    </button>
                                }
                            }

                            @if (item.OptNotariado == "S")
                            {
                                using (Ajax.BeginForm("MarcarTEFNotariado", "Finanzas", new AjaxOptions()
                                {
                                    HttpMethod = "POST",
                                    InsertionMode = InsertionMode.Replace,
                                    UpdateTargetId = "transferenciasConfirmadas",
                                    LoadingElementId = "loader"
                                }))
                                {
                                    <input type="text" name="codigoProceso" value="@ViewBag.ReferenciaCodigoProceso" class="dspl-none" />
                                    <input type="text" name="codigoPago" value="@item.CodigoTEF" class="dspl-none" />
                                    <input type="text" name="tipoPago" value="@ViewBag.ReferenciaMetodoPago" class="dspl-none" />
                                    <input type="text" name="origen" value="@item.Origen" class="dspl-none" />
                                    <input type="text" name="typeTEF" value="@ViewBag.TypeTEF" class="dspl-none" />
                                    <button type="submit" class="btn btn-success"
                                            style="border-radius: 25px; height: 40px; text-align: left; color: #fff;">
                                        <i class="glyphicon-tw-7 glyphicon-tw-check" style="display: inline-block;"></i>
                                        <span style="display: inline-block; margin-top: -7px;">
                                            <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                font-size: 14px; font-style: normal; display: block; margin-bottom: -8px;">Marcar TEF como</i>
                                            <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                        font-size: 14px; font-style: normal; display: block;">Notariado</i>
                                        </span>
                                    </button>
                                }
                            }
                        </td>
                    </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
}
else
{
    <img src="~/Resources/sinresultados.png" style="width: 100px;" class="dspl-block m-auto" />
    <h1 class="family-teamwork ta-center color-70x3 mt-10ne">No se han encontrado finiquitos en proceso para pago por</h1>
    <h1 class="family-teamwork ta-center color-70x3 mt-10neg" style="font-size: 50px;">TRANSFERENCIAS</h1>
}
