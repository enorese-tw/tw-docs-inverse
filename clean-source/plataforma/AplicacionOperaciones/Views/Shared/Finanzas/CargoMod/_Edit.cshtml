<div id="contentEdit">
    @switch ((string)ViewBag.OptionStageCargoMod)
    {
        case "Send":
            <div class="mt-150 ta-center">
                <img src="~/Resources/svg/044-success.svg" width="150" height="150" class="dspl-block m-auto" />

                @Html.Raw(ViewBag.HtmlMessageResult)
            </div>
            break;
        default:
            foreach (Teamwork.Model.Finanzas.EstructuraCargo item in ViewBag.RenderizaHeaderEstructura)
            {
                foreach (Teamwork.Model.Operaciones.SolicitudCargo itemSolic in ViewBag.RenderizadoSolicitudesCargoMod)
                {
                    <div class="warning ta-center pdt-10 pdb-10" style="width: 100%; position: fixed; top: 55px; z-index: 9999;">
                        <span style="background-color: #fff; border-radius: 25px;" class="family-teamwork pdt-5 pdb-5 pdl-7 pdr-7">
                            @item.MessageTypeCalculo
                        </span>
                        <span style="background-color: #fff; border-radius: 25px;" class="family-teamwork pdt-5 pdb-5 pdl-7 pdr-7">
                            @item.MessageTypeJornada
                        </span>
                    </div>
                    <div class="row mt-100 ml-auto mr-auto" style="width: 92%;">
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12">

                            <h1 class="family-teamwork"><i class="glyphicon-tw-5 glyphicon-tw-cargomod2"></i>Editando @item.Origen de: @item.NombreCargoMod</h1>
                        </div>
                    </div>
                    <div class="row ml-auto mr-auto" style="width: 92%;">
                        <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                            <div class="mb-20">
                                @Html.ButtonAdministracion(
                                    "submit",
                                    new string[] {
                                        "class='dspl-inline-block btn btn-teamwork color-fx3 new-family-teamwork mr-2'",
                                        "onclick='handleClickRedirectAction(this)'",
                                        "data-reference='" + itemSolic.EnlaceVolver + "'"
                                    },
                                    new string[]
                                    {
                                        "min-width: 50px",
                                        "height: 50px",
                                        "border: none",
                                        "font-size: 15px",
                                        "border-radius: 25px",
                                        "text-align: center",
                                        "font-weight: 100"
                                    },
                                    new string[]
                                    {
                                        "<img src='../../../Resources/atras.svg' width='20' height='20' style='position: relative; left: 1%; margin-top: -5%; margin-right: 3px;' />" +
                                        "<span style='position: relative; float: right;'>Volver</span>"
                                    },
                                    true
                                )

                                @using (Ajax.BeginForm("CambioEstadoSolicitud", "Finanzas", new AjaxOptions()
                                {
                                    HttpMethod = "POST",
                                    UpdateTargetId = "contentDetail",
                                    InsertionMode = InsertionMode.Replace,
                                    LoadingElementId = "loader",
                                    OnSuccess = "handleScrollTop"
                                }))
                                {
                                    <input type="text" name="origen" value="Detail" class="dspl-none" />
                                    <input type="text" name="codigoCargoMod" value="@itemSolic.CodigoSolicitud" class="dspl-none" />
                                    <input type="text" name="estado" value="RZ" class="dspl-none" />
                                    @Html.ButtonAdministracion(
                                        "submit",
                                        new string[] {
                                            "class='dspl-inline-block btn btn-danger new-family-teamwork mr-5'"
                                        },
                                        new string[]
                                        {
                                            "min-width: 50px",
                                            "height: 50px",
                                            "border: none",
                                            "font-size: 15px",
                                            "border-radius: 25px",
                                            "text-align: center",
                                            "font-weight: 100"
                                        },
                                        new string[]
                                        {
                                            "<img src='../../../Resources/rechazo.svg' width='20' height='20' style='position: relative; left: 1%; margin-top: -5%; margin-right: 3px;' />" +
                                            "<span style='position: relative; float: right;'>Rechazar</span>"
                                        },
                                        (itemSolic.OptRechazar == "S") ? true : false
                                    )
                                }

                                @Html.ButtonAdministracion(
                                    "submit",
                                    new string[] {
                                        "class='dspl-inline-block btn btn-danger new-family-teamwork mr-5'",
                                        "onclick='handleClickRedirectAction(this, `_blank`)'",
                                        "data-reference='" + itemSolic.EnlaceEstructura + "'"
                                    },
                                    new string[]
                                    {
                                        "min-width: 50px",
                                        "height: 50px",
                                        "border: none",
                                        "font-size: 15px",
                                        "border-radius: 25px",
                                        "text-align: center",
                                        "font-weight: 100"
                                    },
                                    new string[]
                                    {
                                        "<img src='../../../Resources/pdf.svg' width='20' height='20' style='position: relative; left: 1%; margin-top: -5%; margin-right: 3px;' />" +
                                        "<span style='position: relative; float: right;'>Estructura</span>"
                                    },
                                    (itemSolic.OptPdf == "S") ? true : false
                                )

                                @using (Ajax.BeginForm("DeshacerSolicitud", "Finanzas", new AjaxOptions()
                                {
                                    HttpMethod = "POST",
                                    UpdateTargetId = "contentDetail",
                                    InsertionMode = InsertionMode.Replace,
                                    LoadingElementId = "loader"
                                }))
                                {
                                    <input type="text" name="origen" value="Detail" class="dspl-none" />
                                    <input type="text" class="dspl-none" name="codigoSolicitud" value="@itemSolic.CodigoSolicitud" />
                                    @Html.ButtonAdministracion(
                                        "submit",
                                        new string[] {
                                            "class='dspl-inline-block btn btn-danger new-family-teamwork mr-5'"
                                        },
                                        new string[]
                                        {
                                            "min-width: 50px",
                                            "height: 50px",
                                            "border: none",
                                            "font-size: 15px",
                                            "border-radius: 25px",
                                            "text-align: center",
                                            "font-weight: 100"
                                        },
                                        new string[]
                                        {
                                            "<img src='../../../Resources/eliminar.svg' width='20' height='20' style='position: relative; left: 1%; margin-top: -5%; margin-right: 3px;' />" +
                                        "<span style='position: relative; float: right;'>Eliminar</span>"
                                        },
                                        (itemSolic.OptDesechar == "S") ? true : false
                                    )
                                }

                                @switch (item.TypeSueldoInputActual)
                                {
                                    case "SL":
                                        using (Ajax.BeginForm("CambiarInputSueldo", "Finanzas", new AjaxOptions()
                                        {
                                            HttpMethod = "POST",
                                            UpdateTargetId = "contentEdit",
                                            InsertionMode = InsertionMode.Replace,
                                            LoadingElementId = "loader"
                                        }))
                                        {
                                            <input type="text" class="dspl-none" name="codigoCargoMod" value="@item.CodigoCargoMod" />
                                            <input type="text" class="dspl-none" name="sueldo" value="@item.TypeSueldoInputChange" />
                                            @Html.ButtonAdministracion(
                                                "submit",
                                                new string[] {
                                                    "class='dspl-inline-block btn btn-teamwork new-family-teamwork mr-5 color-fx3'"
                                                },
                                                new string[]
                                                {
                                                    "min-width: 50px",
                                                    "height: 50px",
                                                    "border: none",
                                                    "font-size: 15px",
                                                    "border-radius: 25px",
                                                    "text-align: center",
                                                    "font-weight: 100"
                                                },
                                                new string[]
                                                {
                                                    "<img src='../../../Resources/boton-actualizar.png' width='20' height='20' style='position: relative; left: 1%; margin-top: -5%; margin-right: 3px;' />" +
                                                    "<span style='position: relative; float: right;'>Cambiar a Sueldo Base</span>"
                                                },
                                                true
                                            )
                                        }
                                        break;
                                    case "SB":
                                        using (Ajax.BeginForm("CambiarInputSueldo", "Finanzas", new AjaxOptions()
                                        {
                                            HttpMethod = "POST",
                                            UpdateTargetId = "contentEdit",
                                            InsertionMode = InsertionMode.Replace,
                                            LoadingElementId = "loader"
                                        }))
                                        {
                                            <input type="text" class="dspl-none" name="codigoCargoMod" value="@item.CodigoCargoMod" />
                                            <input type="text" class="dspl-none" name="sueldo" value="@item.TypeSueldoInputChange" />
                                            @Html.ButtonAdministracion(
                                                "submit",
                                                new string[] {
                                                    "class='dspl-inline-block btn btn-teamwork new-family-teamwork mr-5 color-fx3'"
                                                },
                                                new string[]
                                                {
                                                    "min-width: 50px",
                                                    "height: 50px",
                                                    "border: none",
                                                    "font-size: 15px",
                                                    "border-radius: 25px",
                                                    "text-align: center",
                                                    "font-weight: 100"
                                                },
                                                new string[]
                                                {
                                                    "<img src='../../../Resources/boton-actualizar.png' width='20' height='20' style='position: relative; left: 1%; margin-top: -5%; margin-right: 3px;' />" +
                                                    "<span style='position: relative; float: right;'>Cambiar a Sueldo Liquido</span>"
                                                },
                                                true
                                            )
                                        }

                                        break;
                                }
                            </div>
                        </div>
                    </div>
                }

                <div class="row mt-20 ml-auto mr-auto" style="width: 92%;">
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                        @using (Ajax.BeginForm("CambiarCalculoTypeSueldo", "Finanzas", new AjaxOptions()
                        {
                            HttpMethod = "POST",
                            UpdateTargetId = "contentEdit",
                            InsertionMode = InsertionMode.Replace,
                            LoadingElementId = "loader"
                        }, new { @style = "display: inline-block; width: 80%" }))
                        {
                            <input type="text" class="dspl-none" name="codigoCargoMod" value="@item.CodigoCargoMod" />

                            <label class="switch-md" style="display: inline-block;">
                                <input type="radio" name="sueldo" value="M" onchange="handleChangeTypeSueldo(this)"
                                       @if (item.TypeCalculoSueldo == "M") { @: checked="checked"
                                       } />
                                <span class="slider teamwork"></span>
                            </label>
                            <i class="fst-normal family-teamwork dspl-inline-block mr-10 mt-5neg">Considerar como SUELDO MENSUAL</i>
                            <label class="switch-md" style="display: inline-block;">
                                <input type="radio" name="sueldo" value="D" onchange="handleChangeTypeSueldo(this)"
                                       @if (item.TypeCalculoSueldo == "D") { @: checked="checked"
                                       } />
                                <span class="slider teamwork"></span>
                            </label>
                            <i class="fst-normal family-teamwork dspl-inline-block mr-10 mt-5neg">Considerar como SUELDO DIARIO</i>
                            <input type="submit" class="dspl-none" id="btnTypeCalculoSueldo" />
                        }
                    </div>
                </div>
                <div class="row mt-20 ml-auto mr-auto" style="width: 92%;">
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                        @using (Ajax.BeginForm("CambiarTypeJornada", "Finanzas", new AjaxOptions()
                        {
                            HttpMethod = "POST",
                            UpdateTargetId = "contentEdit",
                            InsertionMode = InsertionMode.Replace,
                            LoadingElementId = "loader",
                            OnSuccess = "handleActionHorarios"
                        }))
                        {
                            <input type="text" class="dspl-none" name="codigoCargoMod" value="@item.CodigoCargoMod" />
                            <label class="switch-md" style="display: inline-block;">
                                <input type="radio" name="typeJornada" value="F" onchange="handleChangeTypeJornada(this)"
                                       @if (item.TypeJornada == "F") { @: checked="checked"
                                       } />
                                <span class="slider teamwork"></span>
                            </label>
                            <i class="fst-normal family-teamwork dspl-inline-block mr-10 mt-5neg">Considerar como JORNADA FULL TIME</i>
                            <label class="switch-md" style="display: inline-block;">
                                <input type="radio" name="typeJornada" id="referenciaPartTime" value="P" onchange="handleChangeTypeJornada(this)"
                                       @if (item.TypeJornada == "P") { @: checked="checked"
                                       } />
                                <span class="slider teamwork"></span>
                            </label>
                            <i class="fst-normal family-teamwork dspl-inline-block mr-10 mt-5neg">Considerar como JORNADA PART TIME</i>
                            <input type="submit" class="dspl-none" id="btnTypeJornada" />
                        }
                    </div>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12" style="
                        @if (item.TypeJornada == "P") { @: display: inline-block;
                        }
                        else { @: display: none;
                        }
                        ">
                        <div style="display: flex;">
                            <div style="display: inline-block; width: 20%;"></div>
                            @using (Ajax.BeginForm("ActualizarJornadaPTSueldo", "Finanzas", new AjaxOptions()
                            {
                                HttpMethod = "POST",
                                UpdateTargetId = "contentEdit",
                                InsertionMode = InsertionMode.Replace,
                                LoadingElementId = "loader",
                                OnSuccess = "handleActionHorarios"
                            }, new { @style = "display: inline-block; width: 70%" }))
                            {
                                <div style="display: flex; align-items: center; width: 100%;">

                                    <span class="dspl-block" style="width: 30%">
                                        <span class="dspl-block">
                                            <label class="switch-md" style="display: inline-block;">
                                                <input type="radio" name="typeJornadaCalculo" value="PTD"
                                                       @if (item.TypeCalculoPT == "PTD") { @: checked="checked"
                                                       } />
                                                <span class="slider teamwork"></span>
                                            </label>
                                            <i class="fst-normal family-teamwork dspl-inline-block mr-10 mt-5neg">Part time por VALOR DIA</i>
                                            <input type="submit" class="dspl-none" id="btnTypeJornada" />
                                        </span>
                                        <span class="dspl-block">
                                            <label class="switch-md" style="display: inline-block;">
                                                <input type="radio" name="typeJornadaCalculo" value="PTH"
                                                       @if (item.TypeCalculoPT == "PTH") { @: checked="checked"
                                                       } />
                                                <span class="slider teamwork"></span>
                                            </label>
                                            <i class="fst-normal family-teamwork dspl-inline-block mr-10 mt-5neg">Part time por VALOR HORA</i>
                                            <input type="submit" class="dspl-none" id="btnTypeJornada" />
                                        </span>
                                    </span>
                                    <span class="dspl-block" style="width: 100%;">
                                        <input type="text" class="dspl-none" value="@item.CodigoCargoMod" name="codigoCargoMod" />
                                        <input type="text" value="@item.ValorSueldoPT" autocomplete="off" required name="valorDiario" class="form-control dspl-inline-block mt-10 mb-10 family-teamwork" onkeyup="this.value = eventMaskThousand(this.value)" style="width: 20%;" />
                                        <input type="text" value="@item.NumeroHorasSemanalesPT" autocomplete="off" id="referenciaHorasSemanales" required name="horasSemanales" class="form-control dspl-inline-block mt-10 mb-10 family-teamwork ta-center" style="width: 20%;" placeholder="Horas semanales" />
                                        <button type="submit" class="btn btn-success"
                                                style="border-radius: 25px; height: 40px; text-align: left; color: #fff;">
                                            <i class="glyphicon-tw-7 glyphicon-tw-check" style="display: inline-block;"></i>
                                            <span style="display: inline-block; margin-top: -7px;">
                                                <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                    font-size: 14px; font-style: normal; display: block; margin-bottom: -8px;">Guardar</i>
                                                <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                    font-size: 14px; font-style: normal; display: block;">Cambio</i>
                                            </span>
                                        </button>
                                    </span>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            }

            if (ViewBag.ErrorSolicitudCargoMod != "" && ViewBag.ErrorSolicitudCargoMod != null)
            {
                <div class="alert alert-danger family-teamwork m-auto" style="width: 90%;">
                    @Html.Raw(ViewBag.ErrorSolicitudCargoMod)
                </div>
            }

            <div class="row mt-20 ml-auto mr-auto" style="width: 92%;">
                <div class="col-12 col-sm-12 col-md-6 col-lg-6 mb-20">
                    <table border="1" style="width: 100%; min-height: 500px; font-size: 18px;" class="family-teamwork br-1-solid-200x3 bl-1-solid-200x3 bt-1-solid-200x3 bb-1-solid-200x3">
                        <tbody>
                            @foreach (Teamwork.Model.Finanzas.EstructuraCargo item in ViewBag.RenderizaHeaderEstructura)
                            {
                                <tr>
                                    <td class="pdl-10 pdr-10" colspan="3" style="color: #f00;">
                                        <b>CARGO / FUNCION: </b>
                                        @using (Ajax.BeginForm("ActualizaNombreCargo", "Finanzas", new AjaxOptions()
                                        {
                                            HttpMethod = "POST",
                                            UpdateTargetId = "contentEdit",
                                            InsertionMode = InsertionMode.Replace,
                                            LoadingElementId = "loader"
                                        }, new { @style = "display: inline-block; width: 80%" }))
                                        {
                                            <input type="text" value="CF" class="dspl-none" name="type" />
                                            <input type="text" value="@item.NombreCargo" autocomplete="off" name="nombreCargo" class="form-control dspl-inline-block mt-10 mb-10" style="width: 80%; font-size: 20px; text-transform: uppercase;" />
                                            <input type="text" value="@item.CodigoCargoMod" class="dspl-none" name="codigoSolicitud" />
                                            <button type="submit" class="btn btn-success"
                                                    style="border-radius: 25px; height: 40px; text-align: left; color: #fff;">
                                                <i class="glyphicon-tw-7 glyphicon-tw-check" style="display: inline-block;"></i>
                                                <span style="display: inline-block; margin-top: -7px;">
                                                    <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                font-size: 14px; font-style: normal; display: block; margin-bottom: -8px;">Guardar</i>
                                                    <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                font-size: 14px; font-style: normal; display: block;">Cambio</i>
                                                </span>
                                            </button>
                                        }
                                    </td>
                                </tr>
                                <tr>
                                    <td class="pdl-10 pdr-10" colspan="3" style="color: #f00;">
                                        <b>NOMBRE CARGO MOD: </b>
                                        @using (Ajax.BeginForm("ActualizaNombreCargo", "Finanzas", new AjaxOptions()
                                        {
                                            HttpMethod = "POST",
                                            UpdateTargetId = "contentEdit",
                                            InsertionMode = InsertionMode.Replace,
                                            LoadingElementId = "loader"
                                        }, new { @style = "display: inline-block; width: 80%" }))
                                        {
                                            <input type="text" value="CM" class="dspl-none" name="type" />
                                            <input type="text" value="@item.NombreCargoMod" id="nombreCargoMod" maxlength="@item.MaxLengthCargoMod" data-noconsiderar="@item.Cliente" data-maxlength="@item.MaxLengthCargoMod" data-restlength="@item.RestLengthCargoMod" autocomplete="off" name="nombreCargo" class="form-control dspl-inline-block mt-10 mb-10" style="width: 80%; font-size: 20px; text-transform: uppercase;" onkeyup="this.value = handleKeyUpCargoMod(this)" />
                                            <input type="text" value="@item.CodigoCargoMod" class="dspl-none" name="codigoSolicitud" />
                                            <button type="submit" class="btn btn-success"
                                                    style="border-radius: 25px; height: 40px; text-align: left; color: #fff;">
                                                <i class="glyphicon-tw-7 glyphicon-tw-check" style="display: inline-block;"></i>
                                                <span style="display: inline-block; margin-top: -7px;">
                                                    <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                font-size: 14px; font-style: normal; display: block; margin-bottom: -8px;">Guardar</i>
                                                    <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                font-size: 14px; font-style: normal; display: block;">Cambio</i>
                                                </span>
                                            </button>
                                        }
                                        <span class="alert alert-info dspl-block pdl-3 pdr-2 pdt-2 pdb-2">
                                            Caracteres disponibles para nombre de cargo mod <i id="restCaracteresCargoMod">@item.RestLengthCargoMod/@item.MaxLengthCargoMod</i>
                                        </span>
                                        @if (item.MessageCargoMod != "")
                                        {
                                            @: <span class="alert alert-danger dspl-block pdl-3 pdr-2 pdt-2 pdb-2">
                                                @item.MessageCargoMod
                                            @: </span>
                                        }
                                    </td>
                                </tr>
                                <tr>
                                    <td class="pdl-10 pdr-10" colspan="3" style="color: #f00;"><b>@item.Cliente</b></td>
                                </tr>
                                <tr>
                                    <td class="pdl-10 pdr-10" style="width: 50%;"><b>Tipo de Contrato</b></td>
                                    <td class="pdl-10 pdr-10 ta-center" colspan="2"><b>@item.TípoContrato</b></td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td class="ta-center">
                                        <b>
                                            Tope Imp. @item.TopeUFImponibleAFC UF <br />
                                            @item.TopeCLPImponibleAFC
                                        </b>
                                    </td>
                                    <td class="ta-center">
                                        <b>
                                            Tope Imp. @item.TopeUFImponible UF <br />
                                            @item.TopeCLPImponible
                                        </b>
                                    </td>
                                </tr>
                            }


                            <tr>
                                <td colspan="3" class="pdl-10 pdr-10"><b>HABERES</b></td>
                            </tr>
                            <tr>
                                <td style="border: none;"><br /></td>
                                <td style="border: none;" colspan="2" class="ta-right"></td>
                            </tr>
                            @foreach (Teamwork.Model.Finanzas.EstructuraCargo item in ViewBag.RenderizaHaberesEstructura)
                            {
                                <tr>
                                    <td style="border: none;" class="pdl-10 pdr-10">
                                        Sueldo Base
                                        @if (item.MessageSueldoBase != "")
                                        {
                                            @: <span class="alert alert-danger dspl-block pdl-3 pdr-2 pdt-2 pdb-2">
                                                @item.MessageSueldoBase
                                            @: </span>
                                        }
                                        @if (item.MessageSugGratif != "")
                                        {
                                            @: <span class="alert alert-warning dspl-block pdl-3 pdr-2 pdt-2 pdb-2">
                                                @item.MessageSugGratif
                                            @: </span>
                                        }

                                        @if (item.GratifSugerida != "")
                                        {
                                            @: <span class="alert alert-warning dspl-block pdl-3 pdr-2 pdt-2 pdb-2 cursor-pointer ta-center" onclick="handleClickGratifSug(this)" data-gratifsug="@item.GratifSugerida">
                                                @: Considerar la gratificación de
                                                @item.GratifSugerida
                                                @: &#x25BE;
                                            @: </span>
                                        }
                                    </td>
                                    <td style="border: none;" colspan="2" class="ta-right pdl-10 pdr-10">
                                        @using (Ajax.BeginForm("ActualizaSueldo", "Finanzas", new AjaxOptions()
                                        {
                                            HttpMethod = "POST",
                                            UpdateTargetId = "contentEdit",
                                            InsertionMode = InsertionMode.Replace,
                                            LoadingElementId = "loader"
                                        }, new { @style = "display: inline-block; width: 80%" }))
                                        {
                                            <span id="contentSueldoBase">@item.SueldoBase</span>
                                            if (ViewBag.TypeSueldoInputActual == "SB" && ViewBag.TypeJornadaActual == "F")
                                            {
                                                <input type="text" value="" autocomplete="off" required name="sueldo" class="form-control dspl-inline-block mt-10 mb-10" onkeyup="this.value = eventMaskThousand(this.value)" style="width: 40%;" />
                                                <input type="text" value="SB" class="dspl-none" name="typeSueldo" />
                                                <input type="text" value="@item.CodigoCargoMod" class="dspl-none" name="codigoSolicitud" />
                                                <button type="submit" class="btn btn-success"
                                                        style="border-radius: 25px; height: 40px; text-align: left; color: #fff;">
                                                    <i class="glyphicon-tw-7 glyphicon-tw-check" style="display: inline-block;"></i>
                                                    <span style="display: inline-block; margin-top: -7px;">
                                                        <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                    font-size: 14px; font-style: normal; display: block; margin-bottom: -8px;">Guardar</i>
                                                        <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                    font-size: 14px; font-style: normal; display: block;">Cambio</i>
                                                    </span>
                                                </button>
                                            }
                                        }
                                    </td>
                                </tr>
                                <tr>
                                    <td style="border: none;" class="pdl-10 pdr-10 pdb-20 pdt-10">
                                        Gratificación

                                        @if (item.MessageGratif != "")
                                        {
                                            @: <span class="alert alert-info dspl-block pdl-2 pdr-2 pdt-2 pdb-2">
                                                @item.MessageGratif
                                            @: </span>
                                        }
                                    </td>
                                    <td style="border: none;" colspan="2" class="ta-right pdl-10 pdr-10 pdt-10 pdb-20">
                                        <b>@item.Gratificacion</b>
                                        <a href="#collapseExample" data-toggle="collapse" role="button" aria-expanded="false" aria-controls="collapseExample" class="btn btn-teamwork"
                                           style="border-radius: 25px; height: 40px; text-align: left; color: #fff;">
                                            <i class="glyphicon-tw-7 glyphicon-tw-check" style="display: inline-block;"></i>
                                            <span style="display: inline-block; margin-top: -7px;">
                                                <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                font-size: 14px; font-style: normal; display: block; margin-bottom: -8px;">Administrar</i>
                                                <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                font-size: 14px; font-style: normal; display: block;">Gratificacion</i>
                                            </span>
                                        </a>
                                    </td>
                                </tr>
                                <tr class="collapse show" id="collapseExample">
                                    <td colspan="3" style="border: 1px dashed rgb(50, 50, 50);">
                                        <h5 class="pdl-10 pdr-10 family-teamwork mt-10">Administración de Gratificación</h5>
                                        <span class="pdl-10 pdr-10 dspl-block">
                                            @using (Ajax.BeginForm("ActualizaGratificacion", "Finanzas", new AjaxOptions()
                                            {
                                                HttpMethod = "POST",
                                                UpdateTargetId = "contentEdit",
                                                InsertionMode = InsertionMode.Replace,
                                                LoadingElementId = "loader"
                                            }))
                                            {
                                                <input type="text" class="dspl-none" name="codigoSolicitud" value="@item.CodigoCargoMod" />
                                                <label class="switch-md" style="display: inline-block;">
                                                    <input type="radio" name="typeGratif" value="CG" onchange="handleChangeGratif(this)"
                                                           @if (item.GratifCC == "N") { @: checked="checked"
                                                           } />
                                                    <span class="slider teamwork"></span>
                                                </label>
                                                <i class="fst-normal family-teamwork dspl-inline-block mr-10 mt-5neg">Con gratificación</i>
                                                <label class="switch-md" style="display: inline-block;">
                                                    <input type="radio" name="typeGratif" value="CC" onchange="handleChangeGratif(this)"
                                                           @if (item.GratifCC == "S") { @: checked="checked"
                                                           } />
                                                    <span class="slider teamwork"></span>
                                                </label>
                                                <i class="fst-normal family-teamwork dspl-inline-block mr-10 mt-5neg">Sin gratificación</i>
                                                <input type="submit" class="dspl-none" id="btnGratificacionCC" />
                                            }

                                        </span>
                                        <span id="contentWithGratif" class="pdl-10 pdr-10" style="
                                              @if (item.GratifCC == "S") { @: display: none;
                                              }
                                              else { @: display: inline-block;
                                              }
                                              ">
                                            @using (Ajax.BeginForm("ActualizaGratificacion", "Finanzas", new AjaxOptions()
                                            {
                                                HttpMethod = "POST",
                                                UpdateTargetId = "contentEdit",
                                                InsertionMode = InsertionMode.Replace,
                                                LoadingElementId = "loader"
                                            }))
                                            {
                                                <input type="text" class="dspl-none" name="codigoSolicitud" value="@item.CodigoCargoMod" />
                                                <label class="switch-md" style="display: inline-block;">
                                                    <input type="radio" name="gratifPactada" value="L" onchange="handleChangeGratif(this)"
                                                           @if (item.GratificacionPactada == "N" && item.GratifCC == "N") { @: checked="checked"
                                                           } />
                                                    <span class="slider teamwork"></span>
                                                </label>
                                                <i class="fst-normal family-teamwork dspl-inline-block mr-10 mt-5neg">Gratificación Legal 25%</i>
                                                <label class="switch-md" style="display: inline-block;">
                                                    <input type="radio" name="gratifPactada" value="GP" onchange="handleChangeGratif(this)"
                                                           @if (item.GratificacionPactada == "S") { @: checked="checked"
                                                           } />
                                                    <span class="slider teamwork"></span>
                                                </label>
                                                <i class="fst-normal family-teamwork dspl-inline-block mr-10 mt-5neg">Gratificación Convencional Pactada</i>
                                                <input type="submit" class="dspl-none" id="btnGratificacionL" />
                                            }
                                        </span>
                                        <span id="contentGratifPactada" class="pdl-10 pdr-10" style="
                                              @if (item.GratificacionPactada == "S") { @: display: inline-block;
                                              }else{ @: display: none;
                                              }
                                            ">
                                            @using (Ajax.BeginForm("ActualizaGratificacion", "Finanzas", new AjaxOptions()
                                            {
                                                HttpMethod = "POST",
                                                UpdateTargetId = "contentEdit",
                                                InsertionMode = InsertionMode.Replace,
                                                LoadingElementId = "loader"
                                            }))
                                            {
                                                <input type="text" class="dspl-none" name="typeGratif" value="PCC" />
                                                <input type="text" class="dspl-none" name="codigoSolicitud" value="@item.CodigoCargoMod" />
                                                <input type="text" autocomplete="off" id="gratifPactadaToSug" required value="@item.Gratificacion.Replace("$ ", "")" name="gratificacion" class="form-control dspl-inline-block mt-10 mb-10" onkeyup="this.value = eventMaskThousand(this.value)" style="width: 40%;" />
                                                <button type="submit" class="btn btn-success" id="btnGratificacionPactada"
                                                        style="border-radius: 25px; height: 40px; text-align: left; color: #fff;">
                                                    <i class="glyphicon-tw-7 glyphicon-tw-check" style="display: inline-block;"></i>
                                                    <span style="display: inline-block; margin-top: -7px;">
                                                        <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                        font-size: 14px; font-style: normal; display: block; margin-bottom: -8px;">Guardar</i>
                                                        <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                        font-size: 14px; font-style: normal; display: block;">Cambio</i>
                                                    </span>
                                                </button>
                                            }
                                        </span>
                                    </td>
                                </tr>
                                foreach (Teamwork.Model.Operaciones.BonosCargoMod itemBono in item.Bonos)
                                {
                                    <tr>
                                        <td style="border: none;" class="pdl-10 pdr-10">
                                            @itemBono.Nombre
                                            @if (itemBono.MessageAsignado != "")
                                            {
                                                @: <p class="alert alert-warning new-family-teamwork pdl-4 pdr-4 pdt-4 pdb-4" style="font-weight: 100; font-size: 12px;">@itemBono.MessageAsignado</p>
                                            }
                                        </td>
                                        <td style="border: none;" colspan="2" class="ta-right pdl-10 pdr-10">
                                            @using (Ajax.BeginForm("ActualizarBono", "Finanzas", new AjaxOptions()
                                            {
                                                HttpMethod = "POST",
                                                UpdateTargetId = "contentEdit",
                                                InsertionMode = InsertionMode.Replace,
                                                LoadingElementId = "loader"
                                            }))
                                            {
                                                @itemBono.Valor
                                                <input type="text" value="@itemBono.CodigoBono" name="codigoBono" class="dspl-none" />
                                                <input type="text" required value="" autocomplete="off" name="monto" class="form-control dspl-inline-block mt-10 mb-10" onkeyup="this.value = eventMaskThousand(this.value)" style="width: 40%;" />
                                                <input type="text" value="@item.CodigoCargoMod" class="dspl-none" name="codigoCargoMod" />
                                                <button type="submit" class="btn btn-success"
                                                        style="border-radius: 25px; height: 40px; text-align: left; color: #fff;">
                                                    <i class="glyphicon-tw-7 glyphicon-tw-check" style="display: inline-block;"></i>
                                                    <span style="display: inline-block; margin-top: -7px;">
                                                        <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                font-size: 14px; font-style: normal; display: block; margin-bottom: -8px;">Guardar</i>
                                                        <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                font-size: 14px; font-style: normal; display: block;">Cambio</i>
                                                    </span>
                                                </button>
                                            }
                                            @using (Ajax.BeginForm("EliminarBono", "Finanzas", new AjaxOptions()
                                            {
                                                HttpMethod = "POST",
                                                UpdateTargetId = "contentEdit",
                                                InsertionMode = InsertionMode.Replace,
                                                LoadingElementId = "loader"
                                            }))
                                            {
                                                <input type="text" value="@itemBono.CodigoBono" name="codigoBono" class="dspl-none" />
                                                <input type="text" value="@item.CodigoCargoMod" class="dspl-none" name="codigoCargoMod" />
                                                <button type="submit" class="btn btn-danger"
                                                        style="border-radius: 25px; height: 40px; text-align: left; color: #fff;">
                                                    <i class="glyphicon-tw-7 glyphicon-tw-trash2" style="display: inline-block;"></i>
                                                    <span style="display: inline-block; margin-top: -7px;">
                                                        <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                font-size: 14px; font-style: normal; display: block; margin-bottom: -8px;">Eliminar</i>
                                                        <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                font-size: 14px; font-style: normal; display: block;">Bono</i>
                                                    </span>
                                                </button>
                                            }
                                        </td>
                                    </tr>
                                }
                                <tr>
                                    <td class="mb-50" style="border: none;">
                                        <div class="row">
                                            @Html.Partial("Finanzas/_DDLSeleccionaBono")
                                        </div>
                                    </td>
                                    <td style="border: none;" colspan="2" class="ta-right pdl-10 pdr-10">
                                        @using (Ajax.BeginForm("AgregarBono", "Finanzas", new AjaxOptions()
                                        {
                                            HttpMethod = "POST",
                                            UpdateTargetId = "contentEdit",
                                            InsertionMode = InsertionMode.Replace,
                                            LoadingElementId = "loader"
                                        }, new { @style = "display: block;" }))
                                        {
                                            <input type="text" value="" class="dspl-none" id="bonoCodigo" name="codigoBono" />
                                            <input type="text" autocomplete="off" required value="" name="monto" class="form-control dspl-inline-block mt-30" onkeyup="this.value = eventMaskThousand(this.value)" style="width: 40%;" />
                                            <input type="text" value="@item.CodigoCargoMod" class="dspl-none" name="codigoCargoMod" />
                                            <button type="submit" class="btn btn-success mt-30"
                                                    style="border-radius: 25px; height: 40px; text-align: left; color: #fff;">
                                                <i class="glyphicon-tw-7 glyphicon-tw-check" style="display: inline-block;"></i>
                                                <span style="display: inline-block; margin-top: -7px;">
                                                    <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                font-size: 14px; font-style: normal; display: block; margin-bottom: -8px;">Guardar</i>
                                                    <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                font-size: 14px; font-style: normal; display: block;">Bono</i>
                                                </span>
                                            </button>
                                        }
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="3" style="border: none;"><br /></td>
                                </tr>
                                <tr>
                                    <td style="border: none;" class="pdl-10 pdr-10"><b>BASE IMPONIBLE</b></td>
                                    <td style="border: none;" colspan="2" class="ta-right pdl-10 pdr-10"><b>@item.BaseImponible</b></td>
                                </tr>
                                <tr>
                                    <td style="border: none;" class="pdl-10 pdr-10"><b>BASE IMPONIBLE AFC</b></td>
                                    <td style="border: none;" colspan="2" class="ta-right pdl-10 pdr-10"><b>@item.BaseImponibleAFC</b></td>
                                </tr>
                                <tr>
                                    <td style="border: none;" class="pdl-10 pdr-10"><b>TOTAL IMPONIBLE</b></td>
                                    <td style="border: none;" colspan="2" class="ta-right pdl-10 pdr-10"><b>@item.TotalImponible</b></td>
                                </tr>
                                <tr>
                                    <td style="border: none;" class="pdl-10 pdr-10"><b>TOTAL TRIBUTABLE</b></td>
                                    <td style="border: none;" colspan="2" class="ta-right pdl-10 pdr-10"><b>@item.TotalTributable</b></td>
                                </tr>
                                foreach (Teamwork.Model.Operaciones.ANIsCargoMod itemANI in item.AsignacionesNOImponibles)
                                {
                                    <tr>
                                        <td style="border: none;" class="pdl-10 pdr-10">@itemANI.Nombre</td>
                                        <td style="border: none;" colspan="2" class="ta-right pdl-10 pdr-10">

                                            @using (Ajax.BeginForm("ActualizarANI", "Finanzas", new AjaxOptions()
                                            {
                                                HttpMethod = "POST",
                                                UpdateTargetId = "contentEdit",
                                                InsertionMode = InsertionMode.Replace,
                                                LoadingElementId = "loader"
                                            }))
                                            {
                                                @itemANI.Valor
                                                <input type="text" value="@itemANI.CodigoANI" name="codigoANI" class="dspl-none" />
                                                <input type="text" autocomplete="off" required value="" name="monto" class="form-control dspl-inline-block mt-10 mb-10" onkeyup="this.value = eventMaskThousand(this.value)" style="width: 40%;" />
                                                <input type="text" value="@item.CodigoCargoMod" class="dspl-none" name="codigoCargoMod" />
                                                <button type="submit" class="btn btn-success"
                                                        style="border-radius: 25px; height: 40px; text-align: left; color: #fff;">
                                                    <i class="glyphicon-tw-7 glyphicon-tw-check" style="display: inline-block;"></i>
                                                    <span style="display: inline-block; margin-top: -7px;">
                                                        <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                font-size: 14px; font-style: normal; display: block; margin-bottom: -8px;">Guardar</i>
                                                        <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                font-size: 14px; font-style: normal; display: block;">Cambio</i>
                                                    </span>
                                                </button>
                                            }
                                            @using (Ajax.BeginForm("EliminarANI", "Finanzas", new AjaxOptions()
                                            {
                                                HttpMethod = "POST",
                                                UpdateTargetId = "contentEdit",
                                                InsertionMode = InsertionMode.Replace,
                                                LoadingElementId = "loader"
                                            }))
                                            {
                                                <input type="text" value="@itemANI.CodigoANI" name="codigoANI" class="dspl-none" />
                                                <input type="text" value="@item.CodigoCargoMod" class="dspl-none" name="codigoCargoMod" />
                                                <button type="submit" class="btn btn-danger"
                                                        style="border-radius: 25px; height: 40px; text-align: left; color: #fff;">
                                                    <i class="glyphicon-tw-7 glyphicon-tw-trash2" style="display: inline-block;"></i>
                                                    <span style="display: inline-block; margin-top: -7px;">
                                                        <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                font-size: 14px; font-style: normal; display: block; margin-bottom: -8px;">Eliminar</i>
                                                        <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                font-size: 14px; font-style: normal; display: block;">No Imp.</i>
                                                    </span>
                                                </button>
                                            }

                                        </td>
                                    </tr>
                                }
                                <tr>
                                    <td class="mb-50" style="border: none;">
                                        <div class="row">
                                            @Html.Partial("Finanzas/_DDLSeleccionaANI")
                                        </div>
                                    </td>
                                    <td style="border: none;" colspan="2" class="ta-right pdl-10 pdr-10">
                                        @using (Ajax.BeginForm("AgregarANI", "Finanzas", new AjaxOptions()
                                        {
                                            HttpMethod = "POST",
                                            UpdateTargetId = "contentEdit",
                                            InsertionMode = InsertionMode.Replace,
                                            LoadingElementId = "loader"
                                        }, new { @style = "display: block;" }))
                                        {
                                            <input type="text" value="" class="dspl-none" id="aniCodigo" name="codigoANI" />
                                            <input type="text" required autocomplete="off" value="" name="monto" class="form-control dspl-inline-block mt-30" onkeyup="this.value = eventMaskThousand(this.value)" style="width: 40%;" />
                                            <input type="text" value="@item.CodigoCargoMod" class="dspl-none" name="codigoCargoMod" />
                                            <button type="submit" class="btn btn-success mt-30"
                                                    style="border-radius: 25px; height: 40px; text-align: left; color: #fff;">
                                                <i class="glyphicon-tw-7 glyphicon-tw-check" style="display: inline-block;"></i>
                                                <span style="display: inline-block; margin-top: -7px;">
                                                    <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                font-size: 14px; font-style: normal; display: block; margin-bottom: -8px;">Guardar</i>
                                                    <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                font-size: 14px; font-style: normal; display: block;">Asig. No Imp.</i>
                                                </span>
                                            </button>
                                        }
                                    </td>
                                </tr>
                                <tr>
                                    <td style="border: none;"><br /></td>
                                    <td style="border: none;" colspan="2" class="ta-right"></td>
                                </tr>
                                <tr>
                                    <td style="border: none;" class="pdl-10 pdr-10"><b>TOTAL HABERES</b></td>
                                    <td style="border: none;" colspan="2" class="ta-right pdl-10 pdr-10"><b>@item.TotalHaberes</b></td>
                                </tr>
                            }
                            <tr>
                                <td colspan="3" style="border: none;"><br /><br /></td>
                            </tr>

                        </tbody>
                    </table>
                </div>
                <div class="col-12 col-sm-12 col-md-6 col-lg-6 mb-20" style="min-height: 400px;">
                    <table border="1" style="width: 100%; font-size: 18px;" class="family-teamwork br-1-solid-200x3 bl-1-solid-200x3 bt-1-solid-200x3 bb-1-solid-200x3">
                        <tbody>
                            <tr>
                                <td colspan="5" style="border: none;"><br /></td>
                            </tr>
                            @foreach (Teamwork.Model.Finanzas.EstructuraCargo item in ViewBag.RenderizaDescuentosEstructura)
                            {
                                <tr>
                                    <td style="width: 20%; border: none;"></td>
                                    <td style="border: none; width: 10%;"><b>0.00</b></td>
                                    <td style="border: none;">Horas Trabajadas</td>
                                    <td class="ta-center">A.F.P.</td>
                                    <td class="ta-center">
                                        @using (Ajax.BeginForm("ActualizarAFP", "Finanzas", new AjaxOptions()
                                        {
                                            HttpMethod = "POST",
                                            UpdateTargetId = "contentEdit",
                                            InsertionMode = InsertionMode.Replace,
                                            LoadingElementId = "loader"
                                        }, new { @style = "display: block;" }))
                                        {
                                            <input type="text" value="@item.CodigoCargoMod" class="dspl-none" name="codigoCargoMod" />
                                            <select name="afp" class="form-control dspl-inline-block" style="width: 50%;">
                                                @foreach (Teamwork.Model.Finanzas.AFP itemAFP in ViewBag.RenderizadoAFP)
                                                {
                                                    <option value="@itemAFP.Nombre"
                                                            @if (item.AFP == itemAFP.Nombre) { @: selected="selected"
                                                            }>
                                                        @itemAFP.Nombre
                                                    </option>
                                                }
                                            </select>
                                            <button type="submit" class="btn btn-success mt-10 mb-10"
                                                    style="border-radius: 25px; height: 40px; text-align: left; color: #fff;">
                                                <i class="glyphicon-tw-7 glyphicon-tw-check" style="display: inline-block;"></i>
                                                <span style="display: inline-block; margin-top: -7px;">
                                                    <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                font-size: 14px; font-style: normal; display: block; margin-bottom: -8px;">Guardar</i>
                                                    <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                font-size: 14px; font-style: normal; display: block;">AFP</i>
                                                </span>
                                            </button>
                                        }
                                    </td>
                                </tr>
                                <tr>
                                    <td style="border: none;"></td>
                                    <td style="border: none;"><b>0.00</b></td>
                                    <td style="border: none;">Horas Extras</td>
                                    <td colspan="2" style="border: none;"></td>
                                </tr>
                                <tr>
                                    <td style="border: none;"></td>
                                    <td style="border: none;"><b>0</b></td>
                                    <td style="border: none;">Días Licencia</td>
                                    <td colspan="2" style="border: none;"></td>
                                </tr>
                                <tr>
                                    <td style="border: none;"></td>
                                    <td style="border: none;"><b>30</b></td>
                                    <td style="border: none;">Días del Mes</td>
                                    <td colspan="2" style="border: none;"></td>
                                </tr>
                                <tr>
                                    <td style="border: none;"></td>
                                    <td style="border: none;"><b>30</b></td>
                                    <td style="border: none;">Días Trabajados</td>
                                    <td colspan="2" style="border: none;"></td>
                                </tr>
                                <tr>
                                    <td style="border: none;"></td>
                                    <td style="border: none;"><b>21</b></td>
                                    <td style="border: none;">Días Efectivos</td>
                                    <td colspan="2" style="border: none;"></td>
                                </tr>
                                <tr>
                                    <td style="border: none;"></td>
                                    <td style="border: none;"></td>
                                    <td colspan="3"><b>DESCUENTOS</b></td>
                                </tr>
                                <tr>
                                    <td colspan="5" style="border: none;"><br /></td>
                                </tr>
                                <tr>
                                    <td style="border: none;"></td>
                                    <td style="border: none;"><b>@item.PorcAFP</b></td>
                                    <td style="border: none;">AFP</td>
                                    <td colspan="2" style="border: none; color: #f00;" class="ta-right"><b>@item.CLPAFP</b></td>
                                </tr>
                                <tr>
                                    <td style="border: none;"></td>
                                    <td style="border: none;"><b>@item.PorcFondoPensiones</b></td>
                                    <td style="border: none;">Fondo de Pensiones</td>
                                    <td colspan="2" style="border: none; color: #f00;" class="ta-right"></td>
                                </tr>
                                <tr>
                                    <td style="border: none;"></td>
                                    <td style="border: none;"><b>@item.PorcSegInvalidez</b></td>
                                    <td style="border: none;">Seg. Invalidez</td>
                                    <td colspan="2" style="border: none; color: #f00;" class="ta-right"></td>
                                </tr>
                                <tr>
                                    <td colspan="5" style="border: none;"><br /></td>
                                </tr>
                                <tr>
                                    <td style="border: none;"></td>
                                    <td style="border: none;"><b>@item.PorcSalud</b></td>
                                    <td style="border: none;"><b>FONASA/ISAPRE</b></td>
                                    <td colspan="2" style="border: none; color: #f00;" class="ta-right">@item.CLPSalud</td>
                                </tr>
                                <tr>
                                    <td colspan="5" style="border: none;"><br /></td>
                                </tr>
                                <tr>
                                    <td style="border: none;"></td>
                                    <td style="border: none;"></td>
                                    <td style="border: none;">IMPUESTO UNICO</td>
                                    <td colspan="2" style="border: none; color: #f00;" class="ta-right">@item.CLPImpuestoUnico</td>
                                </tr>
                                <tr>
                                    <td style="border: none;"></td>
                                    <td style="border: none;"><b>@item.PorcSeguroDesempleo</b></td>
                                    <td style="border: none;">SEGURO CESANTIA</td>
                                    <td colspan="2" style="border: none; color: #f00;" class="ta-right">@item.CLPSeguroDesempleo</td>
                                </tr>
                                <tr>
                                    <td colspan="5" style="border: none;"><br /></td>
                                </tr>
                                <tr>
                                    <td style="border: none;"></td>
                                    <td style="border: none;"></td>
                                    <td style="border: none;"><b>TOTAL DESCUENTOS</b></td>
                                    <td colspan="2" style="border: none;" class="ta-right"><b>@item.TotalDescuentos</b></td>
                                </tr>
                            }
                            <tr>
                                <td colspan="5" style="border: none;"><br /></td>
                            </tr>
                            @foreach (Teamwork.Model.Finanzas.EstructuraCargo item in ViewBag.RenderizaHaberesEstructura)
                            {
                                <tr>
                                    <td style="border: none;"></td>
                                    <td style="border: none;"></td>
                                    <td style="border: none;"><b>LIQUIDO A PAGO</b></td>
                                    <td colspan="2" style="border: none; background-color: #ffd800;" class="ta-right">
                                        @using (Ajax.BeginForm("ActualizaSueldo", "Finanzas", new AjaxOptions()
                                        {
                                            HttpMethod = "POST",
                                            UpdateTargetId = "contentEdit",
                                            InsertionMode = InsertionMode.Replace,
                                            LoadingElementId = "loader"
                                        }, new { @style = "display: inline-block; width: 80%" }))
                                        {
                                            <span id="contentSueldoLiquido"><b>@item.SueldoLiquido</b></span>
                                            if (ViewBag.TypeSueldoInputActual == "SL" && ViewBag.TypeJornadaActual == "F")
                                            {
                                                <input type="text" value="" autocomplete="off" required name="sueldo" class="form-control dspl-inline-block mt-10 mb-10" onkeyup="this.value = eventMaskThousand(this.value)" style="width: 40%;" />
                                                <input type="text" value="SL" class="dspl-none" name="typeSueldo" />
                                                <input type="text" value="@item.CodigoCargoMod" class="dspl-none" name="codigoSolicitud" />
                                                <button type="submit" class="btn btn-success"
                                                        style="border-radius: 25px; height: 40px; text-align: left; color: #fff;">
                                                    <i class="glyphicon-tw-7 glyphicon-tw-check" style="display: inline-block;"></i>
                                                    <span style="display: inline-block; margin-top: -7px;">
                                                        <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                font-size: 14px; font-style: normal; display: block; margin-bottom: -8px;">Guardar</i>
                                                        <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                font-size: 14px; font-style: normal; display: block;">Cambio</i>
                                                    </span>
                                                </button>
                                            }
                                        }
                                    </td>
                                </tr>
                            }
                            <tr>
                                <td colspan="5" style="border: none;"><br /></td>
                            </tr>
                        </tbody>
                    </table>
                    @foreach (Teamwork.Model.Finanzas.EstructuraCargo item in ViewBag.RenderizaHeaderEstructura)
                    {
                        <div class="mt-30">
                            @using (Ajax.BeginForm("ActualizaHorario", "Finanzas", new AjaxOptions()
                            {
                                HttpMethod = "POST",
                                UpdateTargetId = "contentEdit",
                                InsertionMode = InsertionMode.Replace,
                                LoadingElementId = "loader",
                                OnSuccess = "handleActionHorarios"
                            }, new { @style = "display: inline-block; width: 100%" }))
                            {
                                <input type="text" class="dspl-none" value="@item.CodigoCargoMod" name="codigoCargoMod" />
                                <textarea name="horarios" id="refereciaHorarios" style="min-height: 200px; max-height: 500px; text-transform: uppercase;"
                                          class="form-control family-teamwork" data-text-save="@item.Horarios" onkeypress="handleKeyUpHorarios(this)">@item.Horarios</textarea>
                                <button type="submit" class="btn btn-success"
                                        style="border-radius: 25px; height: 40px; text-align: left; color: #fff;">
                                    <i class="glyphicon-tw-7 glyphicon-tw-check" style="display: inline-block;"></i>
                                    <span style="display: inline-block; margin-top: -7px;">
                                        <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                font-size: 14px; font-style: normal; display: block; margin-bottom: -8px;">Guardar</i>
                                        <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                font-size: 14px; font-style: normal; display: block;">Cambio</i>
                                    </span>
                                </button>
                            }
                        </div>
                        <div class="mt-30">
                            <h4 class="new-family-teamwork color-100x3" style="font-weight: 100;">Puede seleccionar multiples opciones para que sean observaciones y/o anotaciones:</h4>
                            @foreach (Teamwork.Model.Operaciones.ListObservaciones itemObs in ViewBag.RenderizadoListObservaciones)
                            {
                                <div class="mt-20">
                                    <span class="dspl-inline-block" style="vertical-align: top;">
                                        <label class="switch-md" style="display: inline-block;">
                                            <input type="checkbox" id="item__list__@itemObs.CodigoItem" @itemObs.Checked disabled data-target-new="btn__new__@itemObs.CodigoItem" data-target-deleted="btn__deleted__@itemObs.CodigoItem"
                                                   value="@itemObs.Descripcion" onchange="handleChangeObservaciones(this)" />
                                            <span class="slider teamwork"></span>
                                        </label>
                                        <i class="fst-normal new-family-teamwork dspl-inline-block mr-10 mt-5neg" style="font-weight: 100;">@itemObs.Descripcion</i>
                                    </span>
                                    @using (Ajax.BeginForm("ActualizaObservaciones", "Operaciones", new AjaxOptions()
                                    {
                                        HttpMethod = "POST",
                                        UpdateTargetId = "contentWizards",
                                        InsertionMode = InsertionMode.Replace,
                                        LoadingElementId = "loader"
                                    }))
                                    {
                                        <input type="text" class="dspl-none" value="KM" name="type" />
                                        <input type="text" class="dspl-none" value="@item.CodigoCargoMod" name="codigoCargoMod" />
                                        <textarea name="observaciones" class="dspl-none">@itemObs.Descripcion</textarea>
                                        <input type="submit" id="btn__new__@itemObs.CodigoItem" class="dspl-none" />
                                    }
                                    @using (Ajax.BeginForm("EliminarObservaciones", "Operaciones", new AjaxOptions()
                                    {
                                        HttpMethod = "POST",
                                        UpdateTargetId = "contentWizards",
                                        InsertionMode = InsertionMode.Replace,
                                        LoadingElementId = "loader"
                                    }))
                                    {
                                        <input type="text" class="dspl-none" value="@item.CodigoCargoMod" name="codigoCargoMod" />
                                        <textarea name="observaciones" class="dspl-none">@itemObs.Descripcion</textarea>
                                        <input type="submit" id="btn__deleted__@itemObs.CodigoItem" class="dspl-none" />
                                    }
                                </div>
                            }


                            @using (Ajax.BeginForm("ActualizaObservaciones", "Finanzas", new AjaxOptions()
                            {
                                HttpMethod = "POST",
                                UpdateTargetId = "contentEdit",
                                InsertionMode = InsertionMode.Replace,
                                LoadingElementId = "loader"
                            }, new { @style = "display: inline-block; width: 100%" }))
                            {
                                <input type="text" class="dspl-none" value="FZ" name="type" />
                                <input type="text" class="dspl-none" value="@item.CodigoCargoMod" name="codigoCargoMod" />
                                <textarea name="observaciones" style="min-height: 200px; max-height: 500px;" placeholder="Observaciones adicionales, anotaciones, entre otros." class="form-control family-teamwork">@item.Observaciones2</textarea>
                                <button type="submit" class="btn btn-success"
                                        style="border-radius: 25px; height: 40px; text-align: left; color: #fff;">
                                    <i class="glyphicon-tw-7 glyphicon-tw-check" style="display: inline-block;"></i>
                                    <span style="display: inline-block; margin-top: -7px;">
                                        <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                font-size: 14px; font-style: normal; display: block; margin-bottom: -8px;">Guardar</i>
                                        <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                font-size: 14px; font-style: normal; display: block;">Cambio</i>
                                    </span>
                                </button>
                            }
                        </div>
                    }
                </div>
                <div class="col-12 col-sm-12 col-md-6 col-lg-6 mb-100" style="min-height: 400px;" id="contentProvMarg">
                    <table border="1" cellpadding="5" style="width: 100%; font-size: 18px;" class="family-teamwork br-1-solid-200x3 bl-1-solid-200x3 bt-1-solid-200x3 bb-1-solid-200x3">
                        <tbody>
                            @foreach (Teamwork.Model.Finanzas.Provision item in ViewBag.RenderizaDescuentosProvision)
                            {
                                <tr>
                                    <td style="width: 50%;">@Html.Raw(item.Concepto)</td>
                                    <td class="ta-center">@item.Percentage</td>
                                    <td class="ta-center">@item.MontoCLP</td>
                                    <td class="ta-center">
                                        @if (item.OptWithExcluir != "")
                                        {
                                            switch (item.OptWithExcluir)
                                            {
                                                case "S":
                                                    using (Ajax.BeginForm("CambiarProvMargGastoExcInc", "Finanzas", new AjaxOptions()
                                                    {
                                                        HttpMethod = "POST",
                                                        UpdateTargetId = "contentEdit",
                                                        InsertionMode = InsertionMode.Replace,
                                                        LoadingElementId = "loader"
                                                    }, new { @style = "display: inline-block; width: 80%" }))
                                                    {
                                                        <input type="text" class="dspl-none" name="excInc" value="EXC" />
                                                        <input type="text" class="dspl-none" name="codigoVar" value="@item.CodigoVariable" />
                                                        <input type="text" class="dspl-none" name="codigoCargoMod" value="@item.CodigoCargoMod" />
                                                        <button type="submit" class="btn btn-danger"
                                                                style="border-radius: 25px; height: 40px; text-align: left; color: #fff;">
                                                            <i class="glyphicon-tw-7 glyphicon-tw-trash2" style="display: inline-block;"></i>
                                                            <span style="display: inline-block; margin-top: -7px;">
                                                                <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                                font-size: 14px; font-style: normal; display: block; margin-bottom: -8px;">Excluir</i>
                                                                <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                                font-size: 14px; font-style: normal; display: block;">Gasto</i>
                                                            </span>
                                                        </button>
                                                    }
                                                    break;
                                                case "N":
                                                    using (Ajax.BeginForm("CambiarProvMargGastoExcInc", "Finanzas", new AjaxOptions()
                                                    {
                                                        HttpMethod = "POST",
                                                        UpdateTargetId = "contentEdit",
                                                        InsertionMode = InsertionMode.Replace,
                                                        LoadingElementId = "loader"
                                                    }, new { @style = "display: inline-block; width: 80%" }))
                                                    {
                                                        <input type="text" class="dspl-none" name="excInc" value="INC" />
                                                        <input type="text" class="dspl-none" name="codigoVar" value="@item.CodigoVariable" />
                                                        <input type="text" class="dspl-none" name="codigoCargoMod" value="@item.CodigoCargoMod" />
                                                        <button type="submit" class="btn btn-success"
                                                                style="border-radius: 25px; height: 40px; text-align: left; color: #fff;">
                                                            <i class="glyphicon-tw-7 glyphicon-tw-check" style="display: inline-block;"></i>
                                                            <span style="display: inline-block; margin-top: -7px;">
                                                                <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                            font-size: 14px; font-style: normal; display: block; margin-bottom: -8px;">Incluir</i>
                                                                <i style="font-family: 'Open Sans Condensed', sans-serif;
                                                                            font-size: 14px; font-style: normal; display: block;">Gasto</i>
                                                            </span>
                                                        </button>
                                                    }
                                                    break;
                                            }
                                        }
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
                <div class="col-md-6 col-lg-6"></div>
            </div>
            foreach (Teamwork.Model.Operaciones.SolicitudCargo itemSolic in ViewBag.RenderizadoSolicitudesCargoMod)
            {
                if (itemSolic.OptSolicitar == "S")
                {
                <span class="btn btn-success cursor-pointer new-family-teamwork" id="contentActionGuardar" onclick="handleClickSolicCreacion()" style="font-weight: 100; text-transform: uppercase; position: fixed; bottom: 0; height: 60px; z-index: 99999; display: flex; width: 100%; border-radius: 0px; visibility: hidden;">
                    @foreach (Teamwork.Model.Finanzas.EstructuraCargo item in ViewBag.RenderizaHeaderEstructura)
                    {
                        using (Ajax.BeginForm("CambioEstadoSolicitud", "Finanzas", new AjaxOptions()
                        {
                            HttpMethod = "POST",
                            UpdateTargetId = "contentDetail",
                            InsertionMode = InsertionMode.Replace,
                            LoadingElementId = "loader",
                            OnSuccess = "handleScrollTop"
                        }, new { @style = "display: inline-block; width: 100%;" }))
                        {
                            @: Solicitar Creacion de Cargo Mod

                            <input type="text" name="origen" value="Detail" class="dspl-none" />
                            <input type="text" name="codigoCargoMod" value="@item.CodigoCargoMod" class="dspl-none" />
                            if (itemSolic.Profile == "KAM")
                            {
                                <input type="text" name="estado" value="PDAPROB" class="dspl-none" />
                            }
                            else
                            {
                                <input type="text" name="estado" value="APROB" class="dspl-none" />
                            }
                            <input type="submit" id="btnSolicitarCargo" class="dspl-none" />
                        }
                    }
                </span>
                }
            }
            break;
    }
</div>    


  
<script async>

    window.onload = () => {
        moduleStandarHorarios()
    }

    handleActionHorarios = () => {
        moduleStandarHorarios()
    }

    handleChangeObservaciones = (e) => {
        (e.checked)
            ? document.getElementById(e.dataset.targetNew).click()
            : document.getElementById(e.dataset.targetDeleted).click();
    }

    moduleStandarHorarios = () => {
        const htmlHorario = document.getElementById("refereciaHorarios")
        const textSave = htmlHorario.dataset.textSave
        const standarText = ('JORNADA PART TIME * HORA(S) - ').split('*').join(document.getElementById("referenciaHorasSemanales").value)
        const placeholder = 'Indicar Horarios (Ej. LUNES A VIERNES 09:30 HORAS A 18:30 HORAS)'

        if (textSave === "") {
            if (document.getElementById("referenciaPartTime").checked) {
                htmlHorario.setAttribute("placeholder", `${standarText}${placeholder}`)
                htmlHorario.setAttribute("data-text-standar", `${standarText}`)
            } else {
                htmlHorario.setAttribute("placeholder", `${placeholder}`)
                htmlHorario.setAttribute("data-text-standar", '')
            }
        }
    }

    handleKeyUpHorarios = (e) => {
        console.log(e)
        const words = [...e.value.split(' ')]
        const wordsStandar = [...e.dataset.textStandar.split(' ')]

        if (document.getElementById("referenciaPartTime").checked) {
            return e.value
        }

        if (e.value === "") {
            return ''
        }

        if (words.length < 7) {
            return e.value = 
                (words !== wordsStandar && e.value.split(' ').join('') !== e.dataset.textStandar.split(' ').join(''))
                    ? `${e.dataset.textStandar}${e.value.split(e.dataset.textStandar).join('')}`
                    : `${e.dataset.textStandar}`
        }
        
    }

    handleScrollTop = () => {
        window.scrollTo({ top: 0, behavior: 'smooth' })
    }

    handleClickSolicCreacion = () => {
        document.getElementById("btnSolicitarCargo").click()
    }

    window.onscroll = (e) => {
        const tables = [...document.getElementsByTagName("table")]
        const sueldoBase = document.getElementById("contentSueldoBase")
        const sueldoLiquido = document.getElementById("contentSueldoLiquido")
        const nombreCargoMod = document.getElementById("nombreCargoMod")

        if (tables[0].clientHeight < e.path[1].pageYOffset) {
            if (sueldoBase.innerHTML !== "" &&
                sueldoLiquido.innerHTML !== "" &&
                nombreCargoMod.value.split(nombreCargoMod.dataset.noconsiderar).join('').split(' ').join('') !== "") {
                document.getElementById("contentActionGuardar").style.visibility = "visible"
            }
        }
        else {
            document.getElementById("contentActionGuardar").style.visibility = "hidden"
        }
    }

    handleClickGratifSug = (e) => {
        document.getElementById("gratifPactadaToSug").value = e.dataset.gratifsug
        document.getElementById("btnGratificacionPactada").click()
    }

    handleKeyUpCargoMod = (e) => {
        const elementCountCharaster = document.getElementById("restCaracteresCargoMod")
        const index = e.defaultValue.indexOf(' ') + 1
        const arrayCargo = e.defaultValue.substring(0, e.defaultValue.indexOf(' ') + 1).split('')
        let defaultCargo = ""

        if (e.value.length < index) {
            arrayCargo.map(x => {
                defaultCargo += x
            })
            elementCountCharaster.innerHTML = `${e.dataset.maxlength - arrayCargo.length}/${e.dataset.maxlength}`
        }
        else {
            defaultCargo = e.value
            elementCountCharaster.innerHTML = `${e.dataset.maxlength - e.value.length}/${e.dataset.maxlength}`
        }
    
        return defaultCargo.split(',').join('')
    }

    /** Funcion para conversión de triangulo top y triangulo bottom */

    convertTriangleTopBottom = (element) => {
        return element.split(' ▾').join('').split(' ▴').join('')
    }

    /** Funcion para cambio de gratificación */

    handleChangeGratif = (e) => {
        let eventGratif = e.defaultValue
        if (e.checked) {
            switch (eventGratif) {
                case "CG":
                    document.getElementById("contentWithGratif").style.display = "inline-block"
                    break
                case "CC":
                    document.getElementById("contentWithGratif").style.display = "none"
                    document.getElementById("contentGratifPactada").style.display = "none"
                    document.getElementById("btnGratificacionCC").click()
                    break
                case "L":
                    document.getElementById("contentGratifPactada").style.display = "none"
                    document.getElementById("btnGratificacionL").click()
                    break
                case "GP":
                    document.getElementById("contentGratifPactada").style.display = "inline-block"
                    break
            }
        }
    }

    handleChangeTypeJornada = (e) => {
        document.getElementById("btnTypeJornada").click()
    }

    handleChangeTypeSueldo = (e) => {
        document.getElementById("btnTypeCalculoSueldo").click()
    }

    /** creacion de mascara para valores separados por miles Ej. => 1.000 */

    eventMaskThousand = (e) => {
        const expReg = /[0-9]/
        if (e !== 'Backspace') {
            if (e.match(expReg)) {
                return maskThousand(e)
            }
            else {
                return maskThousand(e.split(e).join(''))
            }
        }
        else
        {
            return maskThousand(e)
        }
    }

    maskThousand = (monto) => {
        let maskThousandFormat = ""
        let separator = 0
        let separation = ''

        if (monto.length <= 3) {
            return monto
        }

        const formatNumbers = monto.split('.').join('')

        const numbers = formatNumbers.split('')

        for (let i = numbers.length - 1; i >= 0; i--) {
            if (separator === 3) {
                separation = '.'
                separator = 0
            }

            maskThousandFormat = `${numbers[i]}${separation}${maskThousandFormat}`

            separator = separator + 1
            separation = ''
        }
        
        return maskThousandFormat
    }

</script>