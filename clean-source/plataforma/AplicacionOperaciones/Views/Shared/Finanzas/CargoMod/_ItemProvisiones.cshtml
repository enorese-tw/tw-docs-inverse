@using AplicacionOperaciones.HelpersHTML

<div class="col-lg-2"></div>
<div class="col-12 col-sm-12 col-md-6 col-lg-8 mt-100">
    <div>
        <h3 class="family-teamwork">Administración de Conceptos de Provisiones</h3>
    </div>
    <div>
        @using (Ajax.BeginForm("ProvMargenCrear", "Finanzas", new AjaxOptions()
        {
            HttpMethod = "POST",
            UpdateTargetId = "contentListaProvisionesGeneral",
            InsertionMode = InsertionMode.Replace,
            LoadingElementId = "loader"
        }, new { @style = "display: inline-block; width: 100%" }))
        {
            <input type="text" name="type" class="dspl-none" value="P" />
            <div class="dspl-inline-block" style="width: 90%; vertical-align: bottom;">
                @Html.InputAdministrador(
                    "text",
                    new string[] {
                        "class='family-teamwork bb-1-solid-200x3 dspl-block mt-20'",
                        "id='input-add'",
                        "data-ownerlegends='legends-add'",
                        "onBlur='handleBlurInput(this)'",
                        "name='glosaNewConcepto'",
                        "required",
                        "autocomplete='off'"
                    },
                    new string[] {
                        "padding: 10px 20px",
                        "outline: none",
                        "width: 100%",
                        "border-left: none",
                        "border-right: none",
                        "border-top: none"
                    },
                    "on",
                    new string[]
                    {
                        "<label class='family-teamwork dspl-block pdt-30 pdl-30 pdb-11 cursor-pointer' onclick='handleFocusInput(this)' style='position: absolute; width: 100%; font-size: 18px;' data-ownerfocus='input-add' id='legends-add'>Nombre Nueva Variable de Provisión</label>"
                    }
                 )
            </div>
            <div class="dspl-inline-block" style="text-align: right; vertical-align: bottom; width: 9%;">
                @Html.ButtonAdministracion(
                    "submit",
                    new string[] {
                        "class='dspl-inline-block btn btn-teamwork'"
                    },
                    new string[]
                    {
                        "width: 45px",
                        "height: 45px",
                        "border: none",
                        "border-radius: 50%",
                        "text-align: center"
                    },
                    new string[]
                    {
                        "<img src='../../Resources/mas.svg' width='20' height='20' style='position: relative; ' />"
                    },
                    true
                )
            </div>
        }

    </div>
    <div id="contentListaProvisionesGeneral" class="mb-100 mt-50">
        @Html.Partial("Finanzas/CargoMod/_ListaProvisionesGeneral")
    </div>
</div>
<div class="col-lg-2"></div>

<script>

    handleFocusInput = (e) => {
        e.style.padding = "0px 20px"
        e.style.transition = "all 0.2s ease-in"
        e.style.fontSize = "14px"
        document.getElementById(e.dataset.ownerfocus).focus()
    }

    handleBlurInput = (e) => {
        if (e.value === "") {
            document.getElementById(e.dataset.ownerlegends).style.paddingTop = "30px"
            document.getElementById(e.dataset.ownerlegends).style.paddingLeft = "30px"
            document.getElementById(e.dataset.ownerlegends).style.paddingBottom = "11px"
            document.getElementById(e.dataset.ownerlegends).style.fontSize = "18px"
            document.getElementById(e.dataset.ownerlegends).style.transition = "all 0.2s ease-in"
        }
    }

</script>